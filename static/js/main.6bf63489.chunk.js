(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},42:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(2),s=c.n(a),r=c(24),o=c.n(r),i=(c(34),c(35),c(12)),l=c.n(i),j=c(16),b=c(10),d=c(13),u=c(5),O=s.a.createContext(),m=function(e){var t=e.children,c=Object(a.useState)(!0),s=Object(u.a)(c,2),r=s[0],o=s[1],i=Object(a.useState)({}),l=Object(u.a)(i,2),j=l[0],m=l[1],h=Object(a.useState)([]),x=Object(u.a)(h,2),f=x[0],v=x[1],p=Object(a.useState)(!1),k=Object(u.a)(p,2),N=k[0],g=k[1],C=Object(a.useState)(0),y=Object(u.a)(C,2),I=y[0],A=y[1],S=Object(a.useState)(0),L=Object(u.a)(S,2),w=L[0],T=L[1],V=Object(a.useState)(null),B=Object(u.a)(V,2),E=B[0],P=B[1],$=Object(a.useState)(""),F=Object(u.a)($,2),J=F[0],R=F[1],Y=Object(a.useState)(null),M=Object(u.a)(Y,2),q=M[0],z=M[1];Object(a.useEffect)((function(){!function(){var e=0;f.map((function(t){e+=t.cartItemAmount})),T(e)}(),function(){var e=0;f.map((function(t){e+=t.cartItemPrice.replace("$","")*t.cartItemAmount})),A(e.toFixed(2))}()}),[f]);return Object(n.jsx)(O.Provider,{value:{loading:r,setLoading:o,books:j,setBooks:m,categoryFilters:E,handleChangeCategory:function(e){"All Categories"===e.target.textContent?P(null):P(e.target.textContent)},handleAddItemToCart:function(e){var t,c;j.booksList.map((function(n){n.id===e&&(t=n.title,c=n.price)}));var n=!1;if(f.map((function(e){e.cartItemTitle===t&&(alert("Item is already in the cart!"),n=!0)})),!n){var a={cartItemTitle:t,cartItemPrice:c,cartItemAmount:1};v([].concat(Object(d.a)(f),[a]))}},cartItems:f,handleToggleCart:function(){g(!N)},isCartOpen:N,handleRemoveCartItem:function(e){v(f.filter((function(t){return f.indexOf(t)!==e})))},amount:w,total:I,increaseAmount:function(e){for(var t=0;t<f.length;t++)if(t===e){var c=f[t].cartItemAmount+1,n=Object(b.a)(Object(b.a)({},f[t]),{},{cartItemAmount:c}),a=f;a[t]=n,v(Object(d.a)(a))}},decreaseAmount:function(e){for(var t=0;t<f.length;t++)if(t===e){var c=f[t].cartItemAmount-1;c<1&&(c=1);var n=Object(b.a)(Object(b.a)({},f[t]),{},{cartItemAmount:c}),a=f;a[t]=n,v(Object(d.a)(a))}},handleConfirmOrder:function(){alert("Your order of $".concat(I," is confirmed")),v([])},searchValue:J,setSearchValue:R,handleSearchValue:function(e){R(e.target.value)},bookId:q,setBookId:z},children:t})},h=function(){return Object(a.useContext)(O)},x=c(9),f=function(e){var t=e.id,c=e.title,a=e.cover,s=e.price,r=h(),o=r.handleAddItemToCart,i=r.setBookId;return Object(n.jsxs)("article",{className:"book",children:[Object(n.jsxs)("div",{className:"cover-container",children:[Object(n.jsx)("div",{className:"cover-overlay"}),Object(n.jsx)(x.b,{to:"/book",children:Object(n.jsx)("button",{className:"details-btn",onClick:function(){i(t)},children:"View details"})}),Object(n.jsx)("img",{src:a,alt:c,className:"book-cover"})]}),Object(n.jsxs)("div",{className:"book-info",children:[Object(n.jsx)("h2",{className:"book-title",children:c}),Object(n.jsxs)("h4",{className:"book-price",children:["$",s]}),Object(n.jsx)("button",{className:"add-to-cart-btn",onClick:function(){return o(t)},children:"Add to cart"})]})]})},v=function(e){var t=e.books,c=e.loading,a=h(),s=a.categoryFilters,r=a.searchValue;return!c&&Array.isArray(t.booksList)?Object(n.jsx)("div",{className:"book-list",children:t.booksList.map((function(e){if(""===r){if(null===s)return Object(n.jsx)(f,Object(b.a)({},e),e.id);if(e.category===s)return Object(n.jsx)(f,Object(b.a)({},e),e.id)}else if(null===s){if(e.title.toLowerCase().includes(r.toLowerCase())||e.author.toLowerCase().includes(r.toLowerCase()))return Object(n.jsx)(f,Object(b.a)({},e),e.id)}else if((e.title.toLowerCase().includes(r.toLowerCase())||e.author.toLowerCase().includes(r.toLowerCase()))&&e.category===s)return Object(n.jsx)(f,Object(b.a)({},e),e.id)}))}):Object(n.jsx)("h1",{className:"no-books-notification",children:"No books available."})},p=function(){var e=h(),t=e.books,c=e.handleChangeCategory,a=e.categoryFilters,s=[];Array.isArray(t.booksList)&&t.booksList.map((function(e){s.push(e.category)}));var r=Object(d.a)(new Set(s));return Object(n.jsx)("aside",{className:"sidebar",children:Object(n.jsxs)("ul",{className:"categories-list",children:[Object(n.jsx)("li",{className:"category-item",onClick:function(e){return c(e)},children:"All Categories"}),r.sort().map((function(e,t){return Object(n.jsx)("li",{className:"category-item ".concat(a===e&&"category-item-active"),onClick:function(e){return c(e)},children:e},t)}))]})})},k=function(){var e=h(),t=e.loading,c=e.setLoading,s=e.books,r=e.setBooks,o=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,fetch("database.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,c(!1),r(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),c(!1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o()}),[]),t?Object(n.jsx)("div",{className:"books-container",children:"Loading..."}):Object(n.jsxs)("main",{children:[Object(n.jsx)(p,{}),Object(n.jsxs)("div",{className:"books-container",children:[Object(n.jsx)("h1",{children:"E-books"}),Object(n.jsx)(v,{books:s,loading:t})]})]})},N=c(27),g=c(26),C=function(){var e=h(),t=e.amount,c=e.handleToggleCart,s=e.searchValue,r=e.handleSearchValue,o=Object(a.useState)(!1),i=Object(u.a)(o,2),l=i[0],j=i[1];return Object(n.jsx)("nav",{children:Object(n.jsxs)("div",{className:"nav-container",children:[Object(n.jsx)(x.b,{to:"/",children:Object(n.jsx)("h1",{className:"logo",children:"Bookstore"})}),Object(n.jsxs)("div",{className:"nav-btns",children:[Object(n.jsx)(x.b,{to:"/",children:Object(n.jsxs)("div",{className:"nav-search",children:[Object(n.jsx)("input",{type:"text",value:s,onChange:function(e){return r(e)},className:"search-input ".concat(l&&"search-input-active"),placeholder:"Search..."}),Object(n.jsx)("button",{className:"search-btn",onClick:function(){return j(!l)},style:{backgroundColor:"".concat(l?"#ec1616":"#6d6e70")},children:Object(n.jsx)(g.a,{})})]})}),Object(n.jsxs)("button",{className:"cart-btn",onClick:c,children:[Object(n.jsx)(N.a,{}),Object(n.jsx)("span",{children:t})]})]})]})})},y=c(28),I=c(18),A=function(e){var t=e.item,c=e.id,a=h(),s=a.handleRemoveCartItem,r=a.increaseAmount,o=a.decreaseAmount;return Object(n.jsxs)("li",{className:"cart-item",children:[Object(n.jsx)("span",{className:"cart-item-name",children:t.cartItemTitle}),Object(n.jsx)("span",{className:"cart-item-price",children:t.cartItemPrice}),Object(n.jsx)(y.a,{}),Object(n.jsxs)("div",{className:"item-amount-container",children:[Object(n.jsx)("button",{className:"amount-btn",onClick:function(){return r(c)},children:Object(n.jsx)(I.c,{})}),Object(n.jsx)("p",{className:"amount",children:t.cartItemAmount}),Object(n.jsx)("button",{className:"amount-btn",onClick:function(){return o(c)},children:Object(n.jsx)(I.b,{})})]}),Object(n.jsx)("button",{className:"remove-cart-item-btn",onClick:function(){return s(c)},children:Object(n.jsx)(I.a,{})})]})},S=function(){var e=h(),t=e.cartItems,c=e.isCartOpen,a=e.total,s=e.handleConfirmOrder;return t.length>0?Object(n.jsxs)("div",{className:"cart-container ".concat(c&&"cart-container-open"),children:[Object(n.jsx)("ul",{className:"cart-items",children:t.map((function(e,t){return Object(n.jsx)(A,{item:e,id:t},t)}))}),Object(n.jsxs)("div",{className:"cart-total",children:[Object(n.jsxs)("h1",{children:["Total: ",Object(n.jsxs)("span",{children:["$",a]})]}),Object(n.jsx)("button",{className:"confirm-order-btn",onClick:s,children:"Confirm"})]})]}):Object(n.jsx)("div",{className:"cart-container ".concat(c&&"cart-container-open"),children:Object(n.jsx)("p",{className:"empty-cart-notification",children:"Your cart is currently empty"})})},L=c(3),w=function(){var e=h(),t=e.bookId,c=e.handleAddItemToCart,s=e.setSearchValue,r=e.handleChangeCategory,o=Object(a.useState)(!1),i=Object(u.a)(o,2),b=i[0],d=i[1],O=Object(a.useState)({}),m=Object(u.a)(O,2),f=m[0],v=m[1],p=Object(a.useState)(!0),k=Object(u.a)(p,2),N=k[0],g=k[1],C=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("database.json").then((function(e){return e.json()})).then((function(e){return v(e.booksList.filter((function(e){return e.id===t}))[0])}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){C(),g(!1)}),[]),N)return Object(n.jsx)("div",{className:"book-details-loading-container",children:Object(n.jsxs)("div",{className:"lds-ring",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})});var y=f.id,I=f.cover,A=f.title,S=f.author,L=f.price,w=f.category,T=f.description,V=void 0===T?"":T;return Object(n.jsxs)("div",{className:"book-details-container",children:[Object(n.jsxs)("div",{className:"book-details-img-container",children:[Object(n.jsx)("img",{src:I,alt:A,className:"book-details-img"}),Object(n.jsx)("button",{className:"details-add-to-cart-btn",onClick:function(){return c(y)},children:"Add to cart"})]}),Object(n.jsxs)("div",{className:"book-details-info",children:[Object(n.jsx)("h1",{className:"book-details-title",children:A}),Object(n.jsxs)("h3",{className:"book-details-author",children:["by ",Object(n.jsx)(x.b,{to:"/",children:Object(n.jsx)("span",{onClick:function(e){return s(e.target.textContent)},children:S})})]}),Object(n.jsxs)("h3",{className:"book-details-category",children:["Tags: ",Object(n.jsx)(x.b,{to:"/",children:Object(n.jsx)("span",{onClick:function(e){return r(e)},children:w})})]}),Object(n.jsxs)("p",{className:"book-details-price",children:["Price: ",Object(n.jsxs)("span",{children:["$",L]})]}),Object(n.jsxs)("p",{className:"book-details-description",children:[b?V:"".concat(V.substring(0,400),"..."),Object(n.jsx)("button",{className:"read-more-btn",onClick:function(){return d(!b)},children:b?"read less":"read more"})]})]})]})};var T=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(C,{}),Object(n.jsx)(S,{}),Object(n.jsxs)(L.c,{children:[Object(n.jsx)(L.a,{path:"/",exact:!0,component:k}),Object(n.jsx)(L.a,{component:w})]})]})})};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(m,{children:Object(n.jsx)(T,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6bf63489.chunk.js.map